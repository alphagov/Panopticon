<%= content_for :page_title, "List artefacts" %>
<div class="row-fluid">
  <div class="page-header">
    <h1>Artefacts</h1>
  </div>

  <table class="table table-striped table-bordered table-condensed" id="artefact-list" summary="List of everything">
    <thead>
      <tr>
        <th scope="col">Need</th>
        <th scope="col">Title</th>
        <th scope="col">Format</th>
        <th scope="col">Section</th>
        <th scope="col">Related Items</th>
        <th scope="col">Relatedness Done?</th>
        <th scope="col">App</th>
        <th scope="col">Slug</th>
      </tr>
    </thead>
    <tbody>
    <% @artefacts.each do |artefact| %>
      <tr>
        <td><%= artefact.need_id %></td>
        <td><%= link_to artefact.name, edit_artefact_path(artefact.id) %></td>
        <td class="icon">
          <%= image_tag "icon-#{artefact.kind.downcase}.png", :title => artefact.kind.humanize %>
        </td>
        <td><%=h artefact.section %></td>
        <td><%=h artefact.related_artefacts.count %></td>
        <td><%=h artefact.relatedness_done %></td>
        <td><%= artefact.owning_app %></td>
        <td><%= link_to artefact.slug, "https://www.gov.uk/#{artefact.slug}" %></td>
    <% end %>
    </tbody>
  </table>
</div>


<%= content_for :extra_javascript do %>
  <%= javascript_include_tag 'jquery.tablesorter.min.js' %>
  <script type="text/javascript">
  $(function () {
    $('#artefact-list').tablesorter();
  });
  </script>
<% end %>

