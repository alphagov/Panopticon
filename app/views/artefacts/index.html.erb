<%= content_for :page_title, "List artefacts" %>
<div class="row-fluid">
  <div class="span12">

    <div class="page-header">
      <h1>Artefacts</h1>
    </div>

    <div class="row-fluid">
      <div class="span2">
        <div class="well sidebar-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Filter by Section</li>
            <%= parent_section_tab_list(:current => @section) %>
          </ul>

        </div>

      </div>

      <div class="span10">
        <table class="table table-striped table-bordered table-condensed" id="artefact-list" summary="List of everything">
          <thead>
            <tr>
              <th scope="col">Need</th>
              <th scope="col">Title</th>
              <th scope="col">Format</th>
              <th scope="col">Primary section</th>
              <th scope="col">Other sections</th>
              <th scope="col">Related items</th>
              <th scope="col">App</th>
              <th scope="col">Slug</th>
            </tr>
          </thead>
          <tbody>
          <% @artefacts.each do |artefact| %>
            <tr class="<%= artefact.state %>">
              <td><%= artefact.need_id %></td>
              <td><%= link_to artefact.name, edit_artefact_path(artefact.id) %></td>
              <td>
                <small><%= artefact.kind.humanize %></small>
                <%= content_tag "span", artefact.language, :class => "language_icon lang_#{artefact.language}" %>
              </td>
              <td><%= artefact.primary_section %></td>
              <td><%= (artefact.sections - [artefact.primary_section]).join(", ") %></td>
              <td><%= artefact.related_artefact_ids.count %></td>
              <td><%= artefact.owning_app %></td>
              <td><%= link_to artefact.slug, published_url(artefact) %></td>
            </tr>
          <% end %>
          </tbody>
        </table>
        <%= paginate @artefacts %>
      </div><!-- ./span10 -->
    </div><!-- ./row fluid -->
  </div><!-- ./span12 -->
</div><!-- ./row-fluid-->
